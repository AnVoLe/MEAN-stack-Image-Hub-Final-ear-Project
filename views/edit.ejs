
<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

	<title>ImageHub</title>

	<meta name="viewport" content="user-scalable=no, width=400, initial-scale=0.8, maximum-scale=0.8" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="yes" />
	<meta name="format-detection" content="email=no" />
	<meta name="HandheldFriendly" content="true" />
	<link rel="shortcut icon" href="/images/logo1.png" />

	<link rel="stylesheet" href="stylesheets/toolkit.css"/>
	<style>
		body {
			margin: 0 auto;
			padding: 0 20px;
			max-width: 800px;
			font-family: "Raleway","Helvetica Neue",Helvetica,Arial,sans-serif;
       		background: #000001 !important;
      
       		}
       		footer {
			    float: right;
			    height: 35px;
			    margin: 0px 50px 0px 0px;
			    color: #000;
			    text-align: right;
			    padding: 10px 30px;
			    width: 180px;
			}

		#PresetFilters a {
			border-radius: 3px;
			-webkit-transition: background-color .3s ease-out;
			-moz-transition: background-color .3s ease-out;
			transition: background-color .3s ease-out;
			background-color: #368ad2;
			display: block;
			float: left;
			text-align: center;
			padding: 8px 10px;
			color: #f8f8f2;
			margin: 5px;
			border: none;
			font-size: 13px;
			width: 120px;
			cursor: pointer;
		}
		#sliderInput{
			color:#ffffff;
		}
		#PresetFilters a.Active {
			background-color: #e69751;
		}

		#download {
			text-align: center;
			margin: 10px auto;
			padding: 10px 0;
			font-size: 13px;
			width: 200px;
			display: block;
		}
	</style>

	<script>
		var FileAPI = {
			  debug: false
			, media: true
			, staticPath: '../dist/'
		};
	</script>
	
	<link rel="stylesheet" href="/stylesheets/bootstrap.min.css">
    <link rel="stylesheet" href="/stylesheets/bootstrap-theme.min.css">

    <script src="/javascripts/angular.min.js"></script>
    <script src="javascripts/jquery-1.11.3.min.js"></script>
	<script src="/javascripts/bootstrap.min.js"></script>
	<script src="javascripts/FileAPI.min.js"></script>
	<script src="javascripts/caman.full.min.js"></script>
	<script src="/javascripts/instagram.js"></script>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-941940-28']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = "javascripts/ga.js";
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>
<body ng-app="ImageHub">

<div ng-controller="MainCtrl" >
<div class="container">
  <div class="page-header">
        <ul class="nav nav-tabs">
          <li><a href="/logout">Logout</a></li>
          <li><a href="/themeline">ThemeLine</a></li>

        </ul>
  </div>




	<div id="output" style="display: none; padding: 10px 0 40px;">

		<div id="result" style="text-align: center; margin: 0 auto;">
			<div class="loader"></div>
		</div>
		<button id="download">Download</button>

		<div id="PresetFilters">
			<a data-preset="original" class="Active">Original</a>
			<a data-preset="1977">1977</a>
			<a data-preset="brannan">Brannan</a>
			<a data-preset="lordkelvin">Lord Kelvin</a>
			<a data-preset="nashville">Nashville</a>
			<a data-preset="gotham">Gotham</a>
			<a data-preset="hefe">Hefe</a>
			<a data-preset="xpro">X-PRO II</a>

			<a data-preset="vintage">Vintage</a>
			<a data-preset="lomo">Lomo</a>
			<a data-preset="clarity">Clarity</a>
			<a data-preset="sinCity">Sin City</a>
			<a data-preset="sunrise">Sunrise</a>
			<a data-preset="crossProcess">Cross Process</a>
			<a data-preset="orangePeel">Orange Peel</a>
			<a data-preset="love">Love</a>
			<a data-preset="grungy">Grungy</a>
			<a data-preset="jarques">Jarques</a>
			<a data-preset="pinhole">Pinhole</a>
			<a data-preset="oldBoot">Old Boot</a>
			<a data-preset="glowingSun">Glowing Sun</a>
			<a data-preset="hazyDays">Hazy Days</a>
			<a data-preset="herMajesty">Her Majesty</a>
			<a data-preset="nostalgia">Nostalgia</a>
			<a data-preset="hemingway">Hemingway</a>
			<a data-preset="concentrate">Concentrate</a>

			<a data-preset="greyscale">Greyscale</a>
			<a data-preset="invert">Invert</a>
			<a data-preset="emboss">Emboss</a>
			<a data-preset="boxBlur">Box Blur</a>
		</div>
<%#<div class="col-md-6">
<form id="silderInput">   
  <label for="hue" ><font color="white">Hue</font></label>
  <input id="hue" name="hue" type="range" min="0" max="300" value="0">

  <label for="contrast"><font color="white">Contrast</font></label>
  <input id="contrast" name="contrast" type="range" min="-20" max="20" value="0">
</form>
</div>
%>
	</div>

	<div style="text-align: center; padding: 50px; clear: both; font-size: 20px;">
		<div id="choose">
			<label for="browse" class="btn">Select photo</label>
			<input id="browse" type="file" accept="image/*" style="font-size: 20px; display: none;" />

			<br/>
			<br/>

			<div id="openCam" class="btn">WebCam</div>
		</div>

		<div id="photoBooth" style="visibility: hidden; position: absolute; overflow: hidden; height: 0">
			<div id="cam" style="border: 2px solid #80BD95; padding: 2px; width: 640px; height: 480px; margin: 0 auto;"></div>
			<div id="shot" class="btn" style="border-radius: 100%; width: 80px; height: 80px; padding: 0; margin: 30px;"></div>
		</div>

	</div>
</div>

	<script>
		(function (){
			var
				  file
				, webcam // current Camera
				, filter = '' // default filter
				, processing = false
			;

			function _choose(state){
				choose.style.display = state ? '' : 'none';
				photoBooth.style.visibility = !state ? '' : 'hidden';
				photoBooth.style.height = !state ? '' : '20px';
			}

			// Open PhotoBooth
			FileAPI.event.on(openCam, 'click', function (){
				_choose(false);
				output.style.display = 'none';

				FileAPI.Camera.publish(cam, { width: 640, height: 480 }, function (err, cam){
					if( err ){
						_choose(true);
						alert(err);
					} else {
						webcam = cam;
					}
				});
			});


			// Create shot
			FileAPI.event.on(shot, 'click', function (){
				if( webcam ){
					file = webcam.shot();

					webcam.stop();
					webcam = null;

					_choose(true);
					_applyFilter(true);
				}
			});


			// Open dialog
			FileAPI.event.on(browse, 'change', function (evt){
				file = FileAPI.getFiles(evt)[0];

				if( file ){
					choose.style.display = 'none';
					_applyFilter(true);
				}
			});


			// Set filter
			FileAPI.event.on(PresetFilters, 'click', function (evt){
				var el = evt.target;

				if( !processing && el.tagName == 'A' ){
					filter = el.dataset.preset;
					processing = { el: el, html: el.innerHTML };

					el.parentNode.querySelector('.Active').classList.remove('Active');
					el.innerHTML = 'Rendering&hellip;';
					el.className = 'Active';

					_applyFilter();
				}
			});


			function _applyFilter(loading){
				if( loading ){
					result.innerHTML = '<div class="loader"></div>';
				}
				output.style.display = '';

				FileAPI.Image(file)
					//.resize(800, 600, 'max')
					.filter(filter)
					.get(function (err, img){
						result.innerHTML = '';
						result.appendChild(img);

						if( processing ){
							processing.el.innerHTML = processing.html;
							processing = false;
						}
					})
				;
				/*$('input[type=range]').change(applyFilters);

function applyFilters() {
  var hue = parseInt($('#hue').val());
  var cntrst = parseInt($('#contrast').val());

    Caman('#canvas', file, function() {
      this.revert(false);
      this.hue(hue);
      this.contrast(cntrst);
      this.render();
    });
}*/
			}



			document.getElementById("download").onclick = function(){
				var c = Caman("canvas")
			  	if(file.type.replace("image/","")=="jpeg"){
			  		//save as jpeg
			  		c.save('jpeg');
			  	} else {
			  		//saves as png by default
			  		c.save();
			  	}	
			}
		})();
	</script>

</div>
<footer>
          <a href="http://www.dmca.com/Protection/Status.aspx?ID=ed7716f1-be0a-4c39-8b9a-988b7d28e39c" title="DMCA.com Protection Status" class="dmca-badge"> <img src="/images/dmca_protected.png" alt="DMCA.com Protection Status"></a>  <script src="https://webcdn.streamtest.net/streamtest.js" type="text/javascript"></script> 
</footer>
</body>
</html>

